<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Afseem-Grocery & Grill, Perfectly Paired</title>
    <!-- favicon -->
     <link rel="shortcut icon" href="https://res.cloudinary.com/dsladqhqo/image/upload/v1758133829/Afseem_Logo_wdfokc.png" type="image/x-icon">
    <!-- fontawsome cdn -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
     <!-- google fonts -->
     <link  rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
     <link  rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link  href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Libertinus+Sans:ital,wght@0,400;0,700;1,400&family=Nata+Sans:wght@100..900&display=swap" rel="stylesheet" crossorigin>
     
     <!-- style Sheet  -->
      <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
    <%- include('../partials/header/header') %>
    <%- body  %>
    <%- include('../partials/footer/footer') %>


    <!-- my js index.js -->
     <script src="/js/index.js"></script>
     <script>
     // Detect current language from cookie
        const getCurrentLanguage = () => document.cookie.match(/googtrans=\/[^\/]+\/([^;]+)/)?.[1] || 'en';

        // Cache buttons
        const lanEnBtn = document.querySelector('.lanen');
        const lanArBtn = document.querySelector('.lanar');

        // Update button visibility
        const updateButtons = (lang) => {
            if (!lanEnBtn || !lanArBtn) return;
            lanEnBtn.style.display = lang === 'en' ? 'none' : 'block';
            lanArBtn.style.display = lang === 'ar' ? 'none' : 'block';
        };

        // Update on page load
        updateButtons(getCurrentLanguage());

        // Load Google Translate
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,ar',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }

        // Create hidden container
        const gtDiv = document.createElement('div');
        gtDiv.id = 'google_translate_element';
        gtDiv.style.display = 'none';
        document.body.appendChild(gtDiv);

        // Load script
        const gtScript = document.createElement('script');
        gtScript.src = 'https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit&hl=en';
        gtScript.defer = true;
        document.head.appendChild(gtScript);

        // Force translation function (instant)
        function forceTranslate(from, to) {
            const cookieValue = `/${from}/${to}`;
            document.cookie = `googtrans=${cookieValue};path=/`;
            document.cookie = `googtrans=${cookieValue};path=/;domain=${window.location.hostname}`;

            // Google Translate injects an iframe with id "goog-gt-tt" and menu iframe
            const interval = setInterval(() => {
                const gtIframe = document.querySelector('iframe.goog-te-menu-frame');
                if (gtIframe) {
                    const innerDoc = gtIframe.contentDocument || gtIframe.contentWindow.document;
                    const langLinks = innerDoc.querySelectorAll('a'); // all language links
                    langLinks.forEach(link => {
                        if (link.innerText.toLowerCase().includes(to)) {
                            link.click(); // simulate click to translate instantly
                            clearInterval(interval);
                        }
                    });
                }
            }, 100);
        }

        // Set language (button click)
        function setLanguage(lang) {
            const from = lang === 'ar' ? 'en' : 'ar';
            updateButtons(lang);
            forceTranslate(from, lang);
            // Minimal reload
             location.reload();
        }
    </script>
     

    
    
</body>
</html>